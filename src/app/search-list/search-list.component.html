<ngx-spinner class="custom_loader">
  <img src="../../../assets/Loader.gif" />
</ngx-spinner>

<div class="container-fluid" style="padding: 30px 65px">
  <div class="row justify-content-center">
    <!-- Sidebar / Filters -->
    <div class="col-md-2  pe-3"  style="
    background-color: white;
    border-radius: 8px;
    border: 1px solid rgba(133, 132, 132, 0.2);
    padding: 10px;
  ">
   
        <!-- Price Filter -->
        <h4 class="mb-3 text-muted">Price</h4>
        <ngx-slider
          [(value)]="minValue"
          [(highValue)]="maxValue"
          (valueChange)="price_min(minValue, maxValue)"
          [options]="options"
        ></ngx-slider>
        <div class="row mt-2">
          <div class="col-6">
            <p class="mb-1 small fw-medium">Min</p>
            <input
              type="text"
              class="form-control form-control-sm"
              (change)="price_min(minValue, maxValue)"
              [(ngModel)]="minValue"
              style="padding: 4px !important"
            />
          </div>
          <div class="col-6">
            <p class="mb-1 small fw-medium">Max</p>
            <input
              type="text"
              class="form-control form-control-sm"
              (change)="price_min(minValue, maxValue)"
              [(ngModel)]="maxValue"
              style="padding: 4px !important"
            />
          </div>
        </div>
        <!-- Sort By Section (aligned like Discount) -->
        <h4 class="mt-4 mb-3 text-muted">Sort By</h4>
        <ul class="list-unstyled">
          <li class="form-check mb-2">
            <input
              type="checkbox"
              class="form-check-input"
              [checked]="selected_sort === 'asc'"
              (change)="setSort('asc')"
              style="border: 2px solid rgb(102, 96, 96)"
            />
            <label
              class="form-check-label ms-2"
              style="color: rgb(102, 96, 96); cursor: pointer"
            >
              Price Low to High
            </label>
          </li>
          <li class="form-check mb-2">
            <input
              type="checkbox"
              class="form-check-input"
              [checked]="selected_sort === 'desc'"
              (change)="setSort('desc')"
              style="border: 2px solid rgb(102, 96, 96)"
            />
            <label
              class="form-check-label ms-2"
              style="color: rgb(102, 96, 96); cursor: pointer"
            >
              Price High to Low
            </label>
          </li>
          <li class="form-check mb-2">
            <input
              type="checkbox"
              class="form-check-input"
              [checked]="selected_sort === 'popularity'"
              (change)="setSort('popularity')"
              style="border: 2px solid rgb(102, 96, 96)"
            />
            <label
              class="form-check-label ms-2"
              style="color: rgb(102, 96, 96); cursor: pointer"
            >
              Popularity
            </label>
          </li>
        </ul>

        <!-- Discount Filter -->
        <h4 class="mt-4 mb-3 text-muted">Discount</h4>
        <ul class="list-unstyled">
          <li *ngFor="let d of [10, 20, 30, 40, 50]" class="form-check mb-2">
            <input
              type="checkbox"
              class="form-check-input"
              [checked]="selected_disc === d"
              (change)="disc(d)"
              style="border: 2px solid rgb(102, 96, 96)"
            />
            <label
              class="form-check-label ms-2"
              style="color: rgb(102, 96, 96)"
            >
              {{ d }}% or More
            </label>
          </li>
        </ul>
      
    </div>

    <!-- Product List Section -->
    <div class="col-md-10">
      <div class="row">
        <div
          class="col mb-4"
          style="flex: 0 0 20%; max-width: 20%"
          *ngFor="
            let p of resources2
              | paginate : { itemsPerPage: 15, currentPage: Page };
            let i = index
          "
        >
          <div
            class="card h-100 product-card position-relative"
            style="
              background-color: #fdfbfb;
              border-color:  rgba(133, 132, 132, 0.2);
              border-width: 1.5px;
              border-style: solid;
            "
          >
            
  <div
  *ngIf="log_as_cust"
  class="icon-container position-absolute top-0 end-0 p-2 z-2 text-end d-none"
>
  <i
    *ngIf="p.wishlist === '1'"
    class="fa fa-heart text-danger cursor_pointer d-block"
    (click)="wish_list()"
  ></i>
  <i
    *ngIf="p.wishlist !== '1'"
    class="fa fa-heart-o text-secondary cursor_pointer d-block"
    (click)="wish_list()"
  ></i>
  <i
    class="fa fa-eye cursor_pointer d-block text-muted"
  ></i>
</div>

            <div
              (click)="sub_cat(p)"
              class="text-center"
              style="cursor: pointer"
            >
              <img
                [src]="p.low_image_1"
                (error)="
                  p.low_image_1 =
                    'https://gstbucket1.s3.ap-south-1.amazonaws.com/Powertexmodel/noimage.png'
                "
                class="card-img-top img-fluid"
                style="height: 120px; object-fit: contain"
                alt="{{ p.subcategory }}"
              />
            </div>

            <div class="card-body ps-4 py-3 position-relative">
              <h6 class="text-muted mb-1">{{ p.subcategory }}</h6>
              <p class="fw-semibold text-truncate mb-1" title="{{ p.modelno }}">
                {{ p.modelno | slice : 0 : 20 }}
              </p>
              <p class="mb-1">
                <span class="fw-bold" style="color: #009b77"
                  >Rs.{{ p.net_price }}</span
                >
                <!-- Only show the discount and strikethrough price if discount is greater than 0 -->
                <span
                  *ngIf="p.discount > 0"
                  class="text-muted text-decoration-line-through ms-2"
                  >Rs.{{ p.mrp }}</span
                >
                <span *ngIf="p.discount > 0" class="ms-2 text-success"
                  >{{ p.discount }}% Off</span
                >
              </p>
              <p class="text-muted small mb-0">(Excluding GST)</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Pagination -->
      <div style="text-align: center; padding: 20px">
        <pagination-controls (pageChange)="Page = $event"></pagination-controls>
      </div>
    </div>
  </div>
</div>

<ngx-spinner class="loader_spinner"></ngx-spinner>
